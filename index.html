<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LatestAI Quantum Indexer | Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ù‚ÙŠØ§Ø¯ÙŠ Ù„Ù„Ø£Ø±Ø´ÙØ©</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=IBM+Plex+Sans+Arabic:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --neon-blue: #00d2ff;
            --neon-purple: #9d50bb;
            --cyber-dark: #05070a;
            --glass-bg: rgba(255, 255, 255, 0.03);
        }

        body {
            font-family: 'IBM Plex Sans Arabic', 'Space Grotesk', sans-serif;
            background-color: var(--cyber-dark);
            color: #ffffff;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ */
        .cyber-bg {
            background: radial-gradient(circle at 50% 50%, #101520 0%, #05070a 100%);
            background-attachment: fixed;
        }

        /* Ù„ÙˆØ­Ø§Øª Glassmorphism */
        .glass {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .glass:hover {
            border-color: rgba(0, 210, 255, 0.2);
            box-shadow: 0 0 30px rgba(0, 210, 255, 0.05);
        }

        /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ù…Ø¶ÙŠØ¦Ø© (Neon Border) */
        .neon-border {
            border: 1px solid transparent;
            background-image: linear-gradient(var(--cyber-dark), var(--cyber-dark)), 
                              linear-gradient(to right, var(--neon-blue), var(--neon-purple));
            background-origin: border-box;
            background-clip: padding-box, border-box;
        }

        /* ØªØ®ØµÙŠØµ Ø£Ø´Ø±Ø·Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ± */
        .custom-scroll::-webkit-scrollbar { width: 5px; height: 5px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { 
            background: linear-gradient(to bottom, var(--neon-blue), var(--neon-purple)); 
            border-radius: 10px; 
        }

        /* Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† */
        @keyframes pulse-cyan {
            0%, 100% { box-shadow: 0 0 5px rgba(0, 210, 255, 0.5); }
            50% { box-shadow: 0 0 20px rgba(0, 210, 255, 0.8); }
        }

        .status-pulse { animation: pulse-cyan 2s infinite; }

        .shimmer {
            position: relative;
            overflow: hidden;
        }
        .shimmer::after {
            content: '';
            position: absolute;
            top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.03), transparent);
            transform: rotate(45deg);
            animation: shimmer-effect 3s infinite;
        }
        @keyframes shimmer-effect {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }
    </style>
</head>
<body class="cyber-bg min-h-screen">

    <div id="toastContainer" class="fixed top-6 left-6 z-[100] space-y-3 pointer-events-none"></div>

    <div class="flex flex-col lg:flex-row h-screen">
        
        <aside class="w-full lg:w-24 border-l border-white/5 flex lg:flex-col items-center py-8 gap-10 glass z-50">
            <div class="w-14 h-14 neon-border rounded-2xl flex items-center justify-center shadow-lg group cursor-pointer transition-transform hover:scale-110">
                <span class="font-bold text-xs tracking-tighter text-transparent bg-clip-text bg-gradient-to-br from-cyan-400 to-purple-500">Q-AI</span>
            </div>
            
            <nav class="flex lg:flex-col gap-8 opacity-40 flex-1 justify-center">
                <div class="hover:text-cyan-400 transition-colors cursor-pointer p-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="1.5" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
                </div>
                <div class="hover:text-purple-400 transition-colors cursor-pointer p-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="1.5" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                </div>
                <div class="hover:text-pink-400 transition-colors cursor-pointer p-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="1.5" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path></svg>
                </div>
            </nav>

            <div class="mt-auto pb-4">
                <img src="https://api.dicebear.com/7.x/bottts/svg?seed=latestai-indexer" class="w-10 h-10 rounded-full border border-white/10" alt="Avatar">
            </div>
        </aside>

        <main class="flex-1 overflow-y-auto custom-scroll p-4 md:p-8 lg:p-12">
            
            <header class="flex flex-col xl:flex-row justify-between items-start xl:items-center mb-12 gap-8">
                <div class="space-y-1">
                    <h1 class="text-5xl font-bold tracking-tighter bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 bg-clip-text text-transparent italic">QUANTUM INDEXER</h1>
                    <div class="flex items-center gap-3">
                        <span class="h-[1px] w-12 bg-slate-800"></span>
                        <p class="text-slate-500 text-[10px] font-bold tracking-[0.4em] uppercase">Autonomous Command Dashboard v5.0</p>
                    </div>
                </div>

                <div class="flex flex-wrap gap-4">
                    <div class="glass px-6 py-3 rounded-2xl border border-white/5 flex items-center gap-4 group">
                        <div class="flex flex-col items-end leading-none">
                            <span class="text-[9px] text-slate-500 font-bold uppercase mb-1">System Health</span>
                            <span class="text-xs font-mono text-green-400">OPERATIONAL</span>
                        </div>
                        <div id="healthDot" class="w-3 h-3 bg-green-500 rounded-full status-pulse"></div>
                    </div>
                    <div class="glass px-6 py-3 rounded-2xl border border-white/5 flex items-center gap-4">
                        <div class="flex flex-col items-end leading-none">
                            <span class="text-[9px] text-slate-500 font-bold uppercase mb-1">Local Time</span>
                            <span id="liveClock" class="text-xs font-mono text-cyan-400 tracking-widest">00:00:00</span>
                        </div>
                    </div>
                </div>
            </header>

            <div class="grid grid-cols-1 xl:grid-cols-12 gap-8">
                
                <div class="xl:col-span-3 space-y-8">
                    <div class="glass p-8 rounded-[2.5rem] border border-white/5 shimmer">
                        <div class="flex justify-between items-center mb-8">
                            <h3 class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</h3>
                            <div class="w-2 h-2 bg-cyan-500 rounded-full animate-pulse"></div>
                        </div>
                        <canvas id="activityChart" height="240"></canvas>
                    </div>
                    
                    <div class="grid grid-cols-1 gap-4">
                        <div class="glass p-6 rounded-[2rem] border border-white/5 group">
                            <p class="text-[10px] text-slate-500 uppercase font-bold mb-1">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ø¤Ø±Ø´ÙØ©</p>
                            <div class="flex items-baseline gap-2">
                                <span class="text-4xl font-bold tracking-tighter text-white" id="totalProcessed">0</span>
                                <span class="text-cyan-500 text-[10px] font-bold">+12%</span>
                            </div>
                            <div class="w-full bg-white/5 h-[2px] mt-4 rounded-full overflow-hidden">
                                <div id="progressBar" class="bg-gradient-to-r from-cyan-500 to-purple-500 h-full transition-all duration-1000" style="width: 0%"></div>
                            </div>
                        </div>

                        <div class="glass p-6 rounded-[2rem] border border-white/5">
                            <p class="text-[10px] text-slate-500 uppercase font-bold mb-1">Ù†Ø³Ø¨Ø© ÙƒÙØ§Ø¡Ø© Ø§Ù„Ù€ API</p>
                            <div class="flex items-baseline gap-2">
                                <span class="text-4xl font-bold tracking-tighter text-white">99.2%</span>
                                <span class="text-green-500 text-[10px] font-bold">STABLE</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="xl:col-span-6 space-y-6">
                    <div class="glass rounded-[3rem] p-1 border border-white/10 relative overflow-hidden">
                        <div class="absolute top-0 left-0 w-full h-[2px] bg-gradient-to-r from-cyan-500 via-blue-500 to-purple-600"></div>
                        
                        <div class="p-8">
                            <div class="flex justify-between items-center mb-6 px-2">
                                <div class="flex items-center gap-2">
                                    <span class="text-cyan-500 text-lg">â—</span>
                                    <h2 class="text-sm font-bold text-slate-300 uppercase tracking-widest leading-none">Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙƒÙ…ÙŠ</h2>
                                </div>
                                <div class="flex gap-4">
                                    <button onclick="cleanUrlsUI()" class="text-[10px] text-slate-500 hover:text-cyan-400 transition-colors flex items-center gap-2">
                                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                                        ØªØµÙÙŠØ© Ø§Ù„Ø±ÙˆØ§Ø¨Ø·
                                    </button>
                                </div>
                            </div>

                            <textarea id="urlInput" 
                                class="w-full h-[450px] bg-black/20 border-none text-cyan-50 placeholder:text-slate-800 outline-none resize-none font-mono text-sm leading-relaxed custom-scroll p-6 rounded-3xl"
                                placeholder="ğŸš€ Ø§Ù„ØµÙ‚ Ø±ÙˆØ§Ø¨Ø·Ùƒ Ù‡Ù†Ø§ (Ø±Ø§Ø¨Ø· ÙˆØ§Ø­Ø¯ ÙÙŠ ÙƒÙ„ Ø³Ø·Ø±)..."></textarea>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-8">
                                <button onclick="launchSequence()" id="launchBtn" 
                                    class="group relative overflow-hidden bg-white text-black font-black py-5 rounded-2xl transition-all active:scale-95 shadow-2xl hover:shadow-cyan-500/20">
                                    <div class="absolute inset-0 bg-cyan-400 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>
                                    <div class="relative flex items-center justify-center gap-3">
                                        <span class="uppercase tracking-widest text-sm">Ø¨Ø¯Ø¡ ØªØ³Ù„Ø³Ù„ Ø§Ù„Ø£Ø±Ø´ÙØ©</span>
                                        <div id="loader" class="hidden w-5 h-5 border-2 border-black/20 border-t-black rounded-full animate-spin"></div>
                                    </div>
                                </button>
                                <button onclick="downloadSessionLogs()" class="glass py-5 rounded-2xl hover:bg-white/10 transition-all text-xs font-bold uppercase tracking-[0.2em] border border-white/5">
                                    ØªØµØ¯ÙŠØ± Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø¬Ù„Ø³Ø©
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="xl:col-span-3 space-y-6">
                    <div class="glass p-8 rounded-[2.5rem] border border-white/5">
                        <div class="flex items-center gap-3 mb-8">
                            <div class="w-1.5 h-4 bg-purple-500 rounded-full"></div>
                            <h3 class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">ØªØ´ÙÙŠØ± Ø§Ù„ÙˆØµÙˆÙ„</h3>
                        </div>
                        <div class="space-y-6">
                            <div class="space-y-2 group">
                                <label class="text-[10px] font-bold text-slate-600 uppercase ml-2 tracking-tighter">GitHub Personal Token</label>
                                <input type="password" id="ghToken" class="w-full bg-black/40 border border-white/5 rounded-2xl p-4 text-[10px] outline-none focus:border-cyan-500 transition-all font-mono" placeholder="ghp_************************">
                            </div>
                            <div class="space-y-2">
                                <label class="text-[10px] font-bold text-slate-600 uppercase ml-2 tracking-tighter">Repository Context</label>
                                <input type="text" id="ghRepo" class="w-full bg-black/40 border border-white/5 rounded-2xl p-4 text-[10px] outline-none focus:border-cyan-500 transition-all font-mono italic" placeholder="username/repository-name">
                            </div>
                            <p class="text-[9px] text-slate-500 italic text-center px-4">ÙŠØªÙ… ØªØ®Ø²ÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆØµÙˆÙ„ Ù…Ø­Ù„ÙŠØ§Ù‹ Ø¨Ø´ÙƒÙ„ Ù…Ø´ÙØ± Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ØªØµÙØ­ ÙÙ‚Ø·.</p>
                        </div>
                    </div>

                    <div class="glass rounded-[2.5rem] h-[360px] flex flex-col border border-white/5 overflow-hidden">
                        <div class="bg-black/40 px-6 py-4 border-b border-white/5 flex justify-between items-center">
                            <span class="text-[9px] font-bold text-slate-500 uppercase tracking-widest">Ù…Ø®Ø±Ø¬Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø­ÙŠØ©</span>
                            <div class="flex gap-1.5">
                                <span class="w-2 h-2 rounded-full bg-red-500/20"></span>
                                <span class="w-2 h-2 rounded-full bg-yellow-500/20"></span>
                                <span class="w-2 h-2 rounded-full bg-green-500/20"></span>
                            </div>
                        </div>
                        <div id="terminal" class="flex-1 overflow-y-auto font-mono text-[9px] text-slate-500 p-6 space-y-2 custom-scroll bg-black/10">
                            <p class="text-blue-900/40">>> QUANTUM OS v5.0.0 INITIALIZED...</p>
                            <p class="text-blue-900/40">>> WAITING FOR INPUT SEQUENCE...</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        let myChart;
        const ui = {
            input: document.getElementById('urlInput'),
            terminal: document.getElementById('terminal'),
            btn: document.getElementById('launchBtn'),
            total: document.getElementById('totalProcessed'),
            progress: document.getElementById('progressBar'),
            token: document.getElementById('ghToken'),
            repo: document.getElementById('ghRepo'),
            loader: document.getElementById('loader'),
            health: document.getElementById('healthDot')
        };

        // 1. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆÙ‚Øª (Clock)
        function updateClock() {
            const now = new Date();
            document.getElementById('liveClock').innerText = now.toLocaleTimeString('en-US', { hour12: false });
        }
        setInterval(updateClock, 1000);

        // 2. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© (Charts)
        function initChart() {
            const ctx = document.getElementById('activityChart').getContext('2d');
            const storedHistory = JSON.parse(localStorage.getItem('idx_history') || '[0, 0, 0, 0, 0, 0, 0]');
            
            myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],
                    datasets: [{
                        label: 'Indexing activity',
                        data: storedHistory,
                        borderColor: '#00d2ff',
                        borderWidth: 2,
                        pointBackgroundColor: '#00d2ff',
                        pointRadius: 0,
                        pointHoverRadius: 5,
                        tension: 0.4,
                        fill: true,
                        backgroundColor: (context) => {
                            const gradient = context.chart.ctx.createLinearGradient(0, 0, 0, 400);
                            gradient.addColorStop(0, 'rgba(0, 210, 255, 0.15)');
                            gradient.addColorStop(1, 'rgba(0, 210, 255, 0)');
                            return gradient;
                        }
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { display: false, beginAtZero: true },
                        x: { 
                            grid: { display: false },
                            ticks: { color: '#475569', font: { size: 9, family: 'Space Grotesk' } } 
                        }
                    }
                }
            });
        }

        // 3. Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª ÙˆØ§Ù„Ù„ÙˆÙ‚Ø§Øª (Logging)
        function addLog(msg, type = 'info') {
            const colors = {
                info: 'text-slate-600',
                success: 'text-cyan-400 font-bold',
                error: 'text-red-500',
                warning: 'text-yellow-500'
            };
            const time = new Date().toLocaleTimeString();
            ui.terminal.innerHTML += `<p class="${colors[type]} leading-relaxed">[${time}] >> ${msg}</p>`;
            ui.terminal.scrollTop = ui.terminal.scrollHeight;
        }

        function showToast(message, type = 'success') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `glass px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-4 border-l-4 transition-all duration-500 translate-x-[-100%] opacity-0 pointer-events-auto ${type === 'success' ? 'border-cyan-500' : 'border-red-500'}`;
            
            toast.innerHTML = `
                <div class="w-8 h-8 rounded-full flex items-center justify-center ${type === 'success' ? 'bg-cyan-500/10 text-cyan-500' : 'bg-red-500/10 text-red-500'}">
                    ${type === 'success' ? 'âœ“' : 'âœ•'}
                </div>
                <div class="text-[11px] font-bold text-slate-200 tracking-wide">${message}</div>
            `;
            
            container.appendChild(toast);
            setTimeout(() => { toast.classList.remove('translate-x-[-100%]', 'opacity-0'); }, 100);
            setTimeout(() => {
                toast.classList.add('translate-x-[-100%]', 'opacity-0');
                setTimeout(() => toast.remove(), 500);
            }, 4000);
        }

        // 4. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø±ÙˆØ§Ø¨Ø· (URL Logic)
        function getUrls() {
            return ui.input.value.split(/[\n,]+/)
                .map(u => u.trim())
                .filter(u => u.startsWith('http'))
                .filter((v, i, a) => a.indexOf(v) === i);
        }

        function cleanUrlsUI() {
            const urls = getUrls();
            ui.input.value = urls.join('\n');
            addLog(`ØªÙ…Øª ØªØµÙÙŠØ© Ø§Ù„Ø±ÙˆØ§Ø¨Ø·. Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${urls.length} Ø±Ø§Ø¨Ø· ÙØ±ÙŠØ¯.`, 'warning');
        }

        // 5. Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (The Launch Sequence)
        async function launchSequence() {
            const urls = getUrls();
            const config = {
                token: ui.token.value.trim(),
                repo: ui.repo.value.trim()
            };

            if (urls.length === 0) return showToast("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±ÙˆØ§Ø¨Ø· ØµØ­ÙŠØ­Ø© Ø£ÙˆÙ„Ø§Ù‹!", "error");
            if (!config.token || !config.repo) return showToast("Ø¨ÙŠØ§Ù†Ø§Øª GitHub Ù†Ø§Ù‚ØµØ©!", "error");

            // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
            localStorage.setItem('q_tk', config.token);
            localStorage.setItem('q_rp', config.repo);

            // ØªØ­Ø¶ÙŠØ± Ø§Ù„Ù€ UI
            ui.btn.disabled = true;
            ui.loader.classList.remove('hidden');
            addLog(`Ø¨Ø¯Ø¡ ØªØ³Ù„Ø³Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ Ø¨Ù€ GitHub...`, 'info');
            ui.health.classList.replace('bg-green-500', 'bg-yellow-500');

            try {
                // Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø¬Ù„Ø¨ SHA Ù„Ù…Ù„Ù urls.txt
                addLog(`Ø·Ù„Ø¨ Ù…ÙØªØ§Ø­ Ø§Ù„ØªØ²Ø§Ù…Ù† (SHA) Ù„Ù„Ù…Ù„Ù...`);
                const fileRes = await fetch(`https://api.github.com/repos/${config.repo}/contents/urls.txt`, {
                    headers: { "Authorization": `token ${config.token}` }
                });

                if (!fileRes.ok) {
                    if (fileRes.status === 404) throw new Error("Ø§Ù„Ù…Ù„Ù urls.txt ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹.");
                    if (fileRes.status === 401) throw new Error("Ø§Ù„ØªÙˆÙƒÙ† ØºÙŠØ± ØµØ§Ù„Ø­ (Unauthorized).");
                    throw new Error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹.");
                }

                const fileData = await fileRes.json();
                
                // Ø§Ù„Ø®Ø·ÙˆØ© 2: ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ù Ø¨Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                addLog(`Ø¬Ø§Ø±ÙŠ Ø¶ØºØ· ÙˆØªØ´ÙÙŠØ± ${urls.length} Ø±Ø§Ø¨Ø· ÙˆÙ†Ù‚Ù„Ù‡Ù…...`);
                const updateRes = await fetch(`https://api.github.com/repos/${config.repo}/contents/urls.txt`, {
                    method: "PUT",
                    headers: { 
                        "Authorization": `token ${config.token}`,
                        "Content-Type": "application/json" 
                    },
                    body: JSON.stringify({
                        message: `ğŸŒ€ Quantum Sync: ${urls.length} links`,
                        content: btoa(unescape(encodeURIComponent(urls.join('\n')))),
                        sha: fileData.sha
                    })
                });

                if (updateRes.ok) {
                    // Ø§Ù„Ù†Ø¬Ø§Ø­ Ø§Ù„Ø§Ø­ØªÙØ§Ù„ÙŠ
                    confetti({
                        particleCount: 150,
                        spread: 70,
                        origin: { y: 0.7 },
                        colors: ['#00d2ff', '#9d50bb', '#ffffff']
                    });

                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                    const count = urls.length;
                    const currentTotal = parseInt(ui.total.innerText) + count;
                    ui.total.innerText = currentTotal;
                    localStorage.setItem('q_total', currentTotal);
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø§Ø±Øª
                    const day = new Date().getDay();
                    let history = JSON.parse(localStorage.getItem('idx_history') || '[0,0,0,0,0,0,0]');
                    history[day] += count;
                    localStorage.setItem('idx_history', JSON.stringify(history));
                    myChart.data.datasets[0].data = history;
                    myChart.update();

                    addLog(`Ø§ÙƒØªÙ…Ù„Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­! ØªÙ… ØªØ´ØºÙŠÙ„ GitHub Action.`, 'success');
                    showToast(`ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ${count} Ø±Ø§Ø¨Ø· Ù„Ù„Ø£Ø±Ø´ÙØ©!`);
                    ui.input.value = "";
                    ui.progress.style.width = "100%";
                    setTimeout(() => ui.progress.style.width = "0%", 2000);
                } else {
                    const errJson = await updateRes.json();
                    throw new Error(errJson.message);
                }

            } catch (err) {
                addLog(`ÙØ´Ù„ Ø§Ù„ØªØ³Ù„Ø³Ù„: ${err.message}`, 'error');
                showToast(err.message, "error");
                ui.health.classList.replace('bg-yellow-500', 'bg-red-500');
            } finally {
                ui.btn.disabled = false;
                ui.loader.classList.add('hidden');
                setTimeout(() => {
                    ui.health.className = "w-3 h-3 bg-green-500 rounded-full status-pulse";
                }, 3000);
            }
        }

        function downloadSessionLogs() {
            const blob = new Blob([ui.terminal.innerText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `quantum-logs-${Date.now()}.txt`;
            a.click();
            addLog("ØªÙ… ØªØµØ¯ÙŠØ± Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù….");
        }

        // ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„ØªØ´ØºÙŠÙ„
        window.onload = () => {
            ui.token.value = localStorage.getItem('q_tk') || '';
            ui.repo.value = localStorage.getItem('q_rp') || '';
            ui.total.innerText = localStorage.getItem('q_total') || '0';
            initChart();
            updateClock();
            addLog("Ù†Ø¸Ø§Ù… Quantum Ø§Ù„Ù…ÙˆØ­Ø¯ Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ´ØºÙŠÙ„...");
        };
    </script>
</body>
</html>
